---
layout: post
title: '9series: Introduction and chmod'
date: '2012-01-29T20:00:00.000+01:00'
author: Sakis Kasampallis
tags:
- plan9
- programming
- C
- introduction
- chmod
- operating system
modified_time: '2012-07-04T21:52:52.995+02:00'
thumbnail: http://3.bp.blogspot.com/-JqcOHepwI9U/T7_j5P0hrjI/AAAAAAAAAAg/bacxP26KyXk/s72-c/9chmod.png
blogger_id: tag:blogger.com,1999:blog-7146248794813174249.post-2326291910461523746
blogger_orig_url: http://sakiskasampalis.blogspot.com/2012/01/9series-introduction-and-chmod.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 class="documentDescription" style="text-align: left;">                            <span class=" kssattr-atfieldname-description kssattr-templateId-widgets/textarea kssattr-macro-textarea-field-view inlineEditable" id="parent-fieldname-description">            Introduction to Plan 9 and writing a simple chmod utility&nbsp;</span><span class=" kssattr-atfieldname-description kssattr-templateId-widgets/textarea kssattr-macro-textarea-field-view inlineEditable" id="parent-fieldname-description"> </span></h3>I decided to write down some notes about my experiences while playing with <a class="external-link" href="http://plan9.bell-labs.com/plan9/">Plan 9</a>.  Plan 9 is a free software (OSI certified) distributed operating system  developed in a place that I would like to visit someday: Bell Labs.  Many great programmers have contributed to Plan 9. Among them are the  well-known from the UNIX world Ken Thompson and Rob Pike. Yet another  respected programming figure, Brian Kernighan, claims to be just a <a class="external-link" href="http://doc.cat-v.org/plan_9/2nd_edition/README">casual user</a> of the system (or at least he did in 1995).<br /><br />There are many novel ideas behind Plan 9. Some of them have already been reimplemented in other operating systems: The <code>/proc</code> and other in memory pseudo file systems, private group per user, native  UTF-8 support, append-only file permissions, and treating FTP  directories as local. But there are some Plan 9 features that are simply  impossible to implement in the rest systems; or if they are implemented  it is done in a very ugly/hacky way, because their design is not  flexible enough. To mention a few: Namespaces, no need for  root/superuser or <code>sudo</code>-like hacks, every compilation is by default a cross compilation, device files are controlled using clear-text.<br /><br /><h3 style="text-align: left;">      Coding in Plan 9</h3>Although Plan 9 provides an ANSI/POSIX compatibility layer (APE), it  doesn't make sense to use it for other than porting purposes.The native C  API of Plan 9 is neither POSIX nor ANSI compatible, but IMHO it's  cleaner and simpler to use. As an example, let's look into the  implementation of a simplified <code>chmod</code> utility.<br /><script src="https://gist.github.com/1699511.js?file=mychmod.c"></script><br />A few comments about the interesting parts of the code. Plan 9 has  simple built-in support for handling command line arguments using the <code>ARGBEGIN/ARGEND</code> block. <code>argv0</code> is a convenient name that can be used for referring to the name of the  executable. Applying a new permission mask to a file in Plan 9 is just a  matter of updating the mode flag of the file's <code>Dir</code> structure. The result is a nice utility using only a few lines of code. Here's how it can be used:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-JqcOHepwI9U/T7_j5P0hrjI/AAAAAAAAAAg/bacxP26KyXk/s1600/9chmod.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="97" src="http://3.bp.blogspot.com/-JqcOHepwI9U/T7_j5P0hrjI/AAAAAAAAAAg/bacxP26KyXk/s400/9chmod.png" width="400" /></a></div><br />And that concludes this brief introduction to Plan 9. Until next time... Happy Coding!<br /><br /><h3 style="text-align: left;">      References</h3><ul><li><i>Rob Pike, Dave Presotto, et al. </i><a class="external-link" href="http://plan9.bell-labs.com/sys/doc/9.html">Plan 9 From Bell Labs</a>.</li><li><i>Francisco J Ballesteros.</i> <a class="external-link" href="http://lsub.org/who/nemo/9.intro.pdf">Introduction to Operating System Abstractions using Plan 9 from Bell Labs</a>.</li></ul><div class="documentDescription"></div></div>