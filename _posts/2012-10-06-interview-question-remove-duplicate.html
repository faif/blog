---
layout: post
title: 'Interview question: Remove duplicate characters'
date: '2012-10-06T22:36:00.000+02:00'
author: Sakis Kasampallis
tags:
- interview
- question
- programming
- python
- approach
- tdd
modified_time: '2012-10-07T13:17:17.207+02:00'
thumbnail: http://3.bp.blogspot.com/-N1SisjXQnTM/UG3wDaLwrCI/AAAAAAAAADQ/wkRhaXQTmlo/s72-c/test.png
blogger_id: tag:blogger.com,1999:blog-7146248794813174249.post-1989380913225595039
blogger_orig_url: http://sakiskasampalis.blogspot.com/2012/10/interview-question-remove-duplicate.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Let's assume that we are asked to solve the following problem in a programming interview: "Write a function that removes all duplicate characters from a string". Piece of cake, you might think. Surely they are not asking us to write a Web Browser but there must be a reason for that.<br /><br /><h3 style="text-align: left;">Test first</h3>The interview's time is limited. But this doesn't mean that we should start writing whatever implementation comes on to mind directly. Initially we should at least show to the interviewer that we are familiar with techniques such as <a href="https://en.wikipedia.org/wiki/Test-driven_development">Test Driven Development</a> (TDD). The test cases are useful even if the interviewer is not interested in seeing unit tests. So let's write them down. We should make sure that our function:<br /><ul style="text-align: left;"><li>Doesn't fail with empty strings (so "" is valid input)</li><li>Returns a string of length = 1 as is (for example "a" is returned as "a")</li><li>Returns a string of length = 2 with two same characters as a string with a single character (for example "aa" is returned as "a")</li><li>Removes all the duplicate characters (for example "anakonda" becomes either "ankod" or "konda" depending on which indexes of duplicate characters we choose to remove ; I'll initially use the second case and later switch to the first one)</li><li>Returns a string with no duplicate characters as is (for example "the" is returned as "the") </li></ul>It's fine if we forget some test cases, we can extend them later. Now, let's assume that the interviewer insists on actually implementing the tests. I'll use python, because writing unit tests in python is straightforward -- and I obviously like the language ;)<br /><br />First we need a stub version of the function. Our function, called <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">remDupl</span> will accept a string as input and return a copy of the input string without duplicate characters.<br /><br /><script src="https://gist.github.com/3829456.js?file=strutils.py"></script>Now we are ready to write our test.<br /><br /><script src="https://gist.github.com/3829456.js?file=testremdupl.py"></script> Our test is already useful. We can make sure that it fails and then write the main logic of our function until it passes the test.<br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-N1SisjXQnTM/UG3wDaLwrCI/AAAAAAAAADQ/wkRhaXQTmlo/s1600/test.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="195" src="http://3.bp.blogspot.com/-N1SisjXQnTM/UG3wDaLwrCI/AAAAAAAAADQ/wkRhaXQTmlo/s400/test.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Our test fails, as expected</td></tr></tbody></table><h3 style="text-align: left;">The naive implementation</h3><div style="text-align: left;">So far so good. It's time to start implementing our function. Since the time is against us, the first step is to follow a naive approach. Although the first implementation might not be the most efficient and clean, it's important to get something working. If there's enough time we can improve it later. If there's no time for writing an improved version, we can still discuss with the interviewer the pros and cons of our naive implementation.<br /><br /></div><script src="https://gist.github.com/3829456.js?file=strutils2.py"></script> First of all, does our function behave as expected?<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-IBesi5_D_Jw/UG8-y2KonEI/AAAAAAAAADg/LW41d-h7YpU/s1600/testrem.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="90" src="http://1.bp.blogspot.com/-IBesi5_D_Jw/UG8-y2KonEI/AAAAAAAAADg/LW41d-h7YpU/s400/testrem.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Test result of the naive implementation</td><td class="tr-caption" style="text-align: center;"><br /></td></tr></tbody></table>Looks good :)<br /><br /><h3 style="text-align: left;">Improving the code</h3>What's the time complexity of our algorithm? It's O(n), since we have to  iterate through the whole string. Even if it's hard to improve the time  complexity, we can do better by writing our code in more idiomatic  python. Python offers a set data structure which looks like a good candidate since all items in a set are unique by definition. But unfortunately the items of a set have no particular order therefore we cannot simply create a set out of our input string. We need a trick to preserve ordering. Combining the set with a generator expression and converting it to a string gives the expected result.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-96nQz1pLT6o/UHBqXh02YEI/AAAAAAAAAEA/s_062Zt0k80/s1600/ankod.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><br /></a></div><script src="https://gist.github.com/3829456.js?file=strutils3.py"></script> Nice, let's test our changes.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-96nQz1pLT6o/UHBqXh02YEI/AAAAAAAAAEA/s_062Zt0k80/s1600/ankod.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="203" src="http://3.bp.blogspot.com/-96nQz1pLT6o/UHBqXh02YEI/AAAAAAAAAEA/s_062Zt0k80/s400/ankod.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The test fails, only the first occurrence of a character goes into the set</td></tr></tbody></table><a href="http://3.bp.blogspot.com/-96nQz1pLT6o/UHBqXh02YEI/AAAAAAAAAEA/s_062Zt0k80/s1600/ankod.png" style="margin-left: 1em; margin-right: 1em;"></a> <br /><br /><div class="separator" style="clear: both; text-align: center;"></div>Hmmm, there's something going wrong here. We need to update our test case, since the new code keeps only the first occurrence of each character (thus "anakonda" becomes "ankod" instead of "konda" that used to be when <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">replace</span> was used).<br /><br /><script src="https://gist.github.com/3829456.js?file=testremdupl2.py"></script> Now that we updated the test case, our code should pass the tests. Let's verify.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-ej7FZrKWicI/UHBux3SE3JI/AAAAAAAAAEQ/KAPCu1OfUyg/s1600/pass.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="88" src="http://3.bp.blogspot.com/-ej7FZrKWicI/UHBux3SE3JI/AAAAAAAAAEQ/KAPCu1OfUyg/s400/pass.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The new code passes all the tests</td></tr></tbody></table>And we are done!<br /><br /><h3 style="text-align: left;">Idio(ma)tic?</h3>The new version of our function is more compact and pythonic, but does it really perform better that the first version? Since both algorithms are O(n), the details are in the data structures and one way to find that out is by using a <a href="http://docs.python.org/library/profile.html">profiler</a>. So let's see what's the performance when executing each version of our function with 600.000 strings as input.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-k30NiP2nIZI/UHCLfmXZB_I/AAAAAAAAAEo/F_ABZnaCXCA/s1600/profile.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="223" src="http://4.bp.blogspot.com/-k30NiP2nIZI/UHCLfmXZB_I/AAAAAAAAAEo/F_ABZnaCXCA/s400/profile.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Profiling shows that the naive implementation performs better</td></tr></tbody></table>The second version is a backward step regarding performance. Profiling shows that the generator expression and the join function have the biggest negative impact. Although list comprehensions and generator expressions are the power of python and are optimized for performance, in this particular case the fact that we actually need an ordered string as the output result does not help.<br /><br /><h3 style="text-align: left;">References</h3><ul style="text-align: left;"><li><i>wikipedia.</i> <a href="https://en.wikipedia.org/wiki/Test-driven_development">Test Driven Development</a></li><li><i>python.org. </i><a href="http://docs.python.org/library/profile.html">Profilers</a></li><li><i>Mark Pilgrim. </i><a href="http://getpython3.com/diveintopython3/">Dive Into Python 3</a></li></ul></div>